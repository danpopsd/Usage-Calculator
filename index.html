<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Usage / Licensing Calculator & Invoice</title>
  <!-- jsPDF library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Helvetica, Arial, sans-serif; margin: 20px; }
    h1 { font-size: 24px; margin-bottom: 10px; }
    label { display: block; margin-top: 15px; font-weight: bold; }
    input, select, textarea, button {
      width: 100%; padding: 8px; margin-top: 6px;
      border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;
    }
    .checkbox-group { margin-top: 10px; padding: 10px; border: 1px solid #ccc; border-radius: 4px; background: #f9f9f9; }
    .checkbox-group label { display: inline-flex; align-items: center; margin-right: 12px; font-family: monospace; }
    .checkbox-group input { margin-right: 6px; transform: scale(1.2);}    
    button { background: #333; color: #fff; border: none; cursor: pointer; margin-top: 20px; padding: 10px; border-radius: 4px; }
    button:hover { background: #555; }
    .result { margin-top: 20px; padding: 15px; background: #f1f1f1; border-radius: 6px; white-space: pre-wrap; font-family: monospace; }
    /* Modal */
    .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content:center; align-items:center; }
    .modal-content { background: #fff; padding: 20px; border-radius: 6px; width: 90%; max-width: 600px; max-height: 80vh; overflow-y: auto; }
    .input-group { display: flex; gap:10px; margin-top:10px; }
    .input-group > div { flex:1; }
  </style>
</head>
<body>

  <h1>Usage / Licensing Calculator</h1>

  <label>Creative Fee ($):</label>
  <input type="number" id="creativeFee" placeholder="Enter shoot fee"/>

  <label>Experience Level:</label>
  <select id="experience">
    <option value="1">Entry (1×)</option>
    <option value="1.25">Mid-Level (1.25×)</option>
    <option value="1.5">Experienced (1.5×)</option>
    <option value="2">Top-Tier (2×)</option>
  </select>

  <label>Usage Term:</label>
  <select id="term">
    <option value="0.5">3 Months</option>
    <option value="0.75">6 Months</option>
    <option value="1">1 Year</option>
    <option value="1.5">2 Years</option>
    <option value="2.5">Perpetual</option>
  </select>

  <label>Distribution Format:</label>
  <div class="checkbox-group">
    <label><input type="checkbox" value="web"/>Web (Organic ≤1yr)</label>
    <label><input type="checkbox" value="0.4"/>Social Media</label>
    <label><input type="checkbox" value="0.7"/>Digital Ads</label>
    <label><input type="checkbox" value="0.8"/>Print</label>
    <label><input type="checkbox" value="1.2"/>Billboard</label>
    <label><input type="checkbox" value="1.8"/>TV/Streaming</label>
  </div>

  <label>Geographic Scope:</label>
  <select id="geo">
    <option value="0">Local</option>
    <option value="0.25">Regional</option>
    <option value="0.6">National</option>
    <option value="1.2">International</option>
  </select>

  <label>Exclusivity:</label>
  <select id="exclusivity">
    <option value="0">None</option>
    <option value="0.6">Industry Exclusive</option>
    <option value="1.2">Full Exclusive</option>
  </select>

  <button onclick="calculateLicensingFee()">Calculate Fee</button>
  <div class="result" id="result"></div>
  <button onclick="generateInvoiceForm()">Generate Invoice</button>

  <!-- Invoice Modal -->
  <div class="modal" id="invoiceModal">
    <div class="modal-content">
      <h3>Generate Invoice</h3>

      <label>Client Name:</label>
      <input type="text" id="clientName" placeholder="Enter client name"/>

      <div class="input-group">
        <div>
          <label>Client Phone:</label>
          <input type="text" id="clientPhone" placeholder="Enter client phone"/>
        </div>
        <div>
          <label>Client Email:</label>
          <input type="email" id="clientEmail" placeholder="Enter client email"/>
        </div>
      </div>

      <label>Client Address:</label>
      <input type="text" id="clientAddress" placeholder="Enter client address"/>

      <label>Payment Terms:</label>
      <select id="paymentTerms">
        <option value="dueUponReceipt">Due Upon Receipt</option>
        <option value="net30">Net 30</option>
        <option value="net60">Net 60</option>
        <option value="net90">Net 90</option>
      </select>

      <label>Invoice Type:</label>
      <select id="invoiceType">
        <option>Invoice</option>
        <option>Estimate</option>
      </select>

      <label>Date:</label>
      <input type="date" id="date"/>

      <label>Project Description:</label>
      <textarea id="projectDescription" rows="3"></textarea>

      <div class="input-group">
        <div>
          <label>Your Name:</label>
          <input type="text" id="yourName"/>
        </div>
        <div>
          <label>Your Phone:</label>
          <input type="text" id="yourPhone"/>
        </div>
      </div>
      <div class="input-group">
        <div>
          <label>Your Email:</label>
          <input type="email" id="yourEmail"/>
        </div>
        <div>
          <label>Your Address:</label>
          <input type="text" id="yourAddress"/>
        </div>
      </div>

      <button onclick="generateInvoicePDF()">Download PDF</button>
      <button onclick="closeInvoiceForm()">Exit</button>
    </div>
  </div>

  <script>
    let lastCalc = '';
    function calculateLicensingFee() {
      const cf = parseFloat(document.getElementById('creativeFee').value) || 0;
      const exp = +document.getElementById('experience').value;
      const term = +document.getElementById('term').value;
      const geo = +document.getElementById('geo').value;
      const ex = +document.getElementById('exclusivity').value;
      let media = 0;
      document.querySelectorAll('.checkbox-group input').forEach(cb => {
        if (cb.checked) media += (cb.value==='web'&&term<=1)?0:parseFloat(cb.value);
      });
      const lic = cf * ((term + media + geo + ex) * exp);
      const total = cf + lic;
      lastCalc = `Creative Fee: $${cf.toFixed(2)}\nLicensing Fee: $${lic.toFixed(2)}\nTotal: $${total.toFixed(2)}`;
      document.getElementById('result').innerText = lastCalc;
    }

    function generateInvoiceForm() {
      document.getElementById('invoiceModal').style.display = 'flex';
    }

    function closeInvoiceForm() {
      document.getElementById('invoiceModal').style.display = 'none';
    }

    async function generateInvoicePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF(); let y = 20;
      const type = document.getElementById('invoiceType').value;
      doc.setFontSize(18).text(type, 105, y, {align:'center'}); y+=10;
      const date = document.getElementById('date').value;
      const proj = document.getElementById('projectDescription').value;
      const you = document.getElementById('yourName').value;
      const yph = document.getElementById('yourPhone').value;
      const yem = document.getElementById('yourEmail').value;
      const yad = document.getElementById('yourAddress').value;
      const cli = document.getElementById('clientName').value;
      const com = document.getElementById('companyName').value;
      const cph = document.getElementById('clientPhone').value;
      const cem = document.getElementById('clientEmail').value;
      const cad = document.getElementById('clientAddress').value;
      const payTerm = document.getElementById('paymentTerms').value;
      doc.setFontSize(12);
      doc.text(`Date: ${date}`,14,y); y+=7;
      doc.text(`Project: ${proj}`,14,y); y+=10;
      doc.text('Your Info:',14,y); y+=7;
      doc.text(`${you} | ${yph}`,14,y); y+=6;
      doc.text(`${yem} | ${yad}`,14,y); y+=10;
      doc.text('Client Info:',14,y); y+=7;
      doc.text(`${cli} (${com})`,14,y); y+=6;
      doc.text(`${cph} | ${cem}`,14,y); y+=6;
      doc.text(`${cad}`,14,y); y+=10;
      doc.text('Payment Terms:',14,y); y+=7;
      doc.text(`${payTerm}`,14,y); y+=10;
      doc.text('Fee Breakdown:',14,y); y+=7;
      doc.text(lastCalc,14,y); y+=10;
      doc.text('Thank you for your business!', 14, y);
      doc.save(`Invoice_${date}.pdf`);
      closeInvoiceForm();
    }
  </script>
</body>
</html>
